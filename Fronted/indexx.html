<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application Form - TechCorp Solutions</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .form-container {
            background: radial-gradient(circle, #ffffff, #f0f4ff);
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            padding: 2rem;
            max-width: 1200px;
            width: 100%;
            animation: fadeIn 1s ease-in-out;
        }

        .form-container__logo {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .form-container__logo img {
            max-width: 150px;
            animation: pulse 2s infinite;
        }

        .form-container__title {
            text-align: center;
            font-size: 2rem;
            color: #333;
            margin-bottom: 1rem;
            background: linear-gradient(to right, #6e8efb, #a777e3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .form__page {
            display: none;
        }

        .form__page--active {
            display: block;
        }

        .form__group {
            margin-bottom: 1.5rem;
        }

        .form__label {
            display: block;
            font-size: 1rem;
            color: #555;
            margin-bottom: 0.5rem;
        }

        .form__input, .form__textarea, .form__select, .form__file {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .form__input:focus, .form__textarea:focus, .form__select:focus, .form__file:focus {
            outline: none;
            border-color: #6e8efb;
            box-shadow: 0 0 8px rgba(110, 142, 251, 0.3);
        }

        .form__error {
            color: #e74c3c;
            font-size: 0.9rem;
            margin-top: 0.3rem;
            display: none;
        }

        .form__error--visible {
            display: block;
        }

        .form__navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
        }

        .form__button {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(to right, #6e8efb, #a777e3);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .form__button--secondary {
            background: linear-gradient(to right, #bdc3c7, #2c3e50);
        }

        .form__button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(110, 142, 251, 0.4);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.5s ease-in-out;
        }

        .modal__content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: slideIn 0.5s ease-in-out;
        }

        .modal__title {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 1rem;
        }

        .modal__button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 0 0.5rem;
        }

        .modal__button--confirm {
            background: linear-gradient(to right, #6e8efb, #a777e3);
            color: white;
        }

        .modal__button--cancel {
            background: #e74c3c;
            color: white;
        }

        .form__checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #555;
        }

        .form__radio-group {
            display: flex;
            gap: 1rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @media (max-width: 480px) {
            .form-container {
                padding: 1.5rem;
            }

            .form-container__title {
                font-size: 1.5rem;
            }

            .form__navigation {
                flex-direction: column;
                gap: 1rem;
            }

            .form__button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-container__logo">
            <img src="logo.jpg" alt="TechCorp Solutions Logo">
        </div>
        <h1 class="form-container__title">Job Application Form ðŸš€</h1>
        <form id="jobApplicationForm" enctype="multipart/form-data">
            <!-- Page 1: Personal Information -->
            <div class="form__page form__page--active" id="page1">
                <div class="form__group">
                    <label class="form__label" for="fullName">Full Name</label>
                    <input type="text" id="fullName" name="fullName" class="form__input" data-error="fullNameError" required>
                    <div id="fullNameError" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="parentName">Fatherâ€™s/Motherâ€™s Name</label>
                    <input type="text" id="parentName" name="parentName" class="form__input" data-error="parentNameError" required>
                    <div id="parentNameError" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="gender">Gender</label>
                    <select id="gender" name="gender" class="form__select" data-error="genderError" required>
                        <option value="">Select</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                    <div id="genderError" class="form__error">Please select a gender.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="dob">Date of Birth (YYYY-MM-DD)</label>
                    <input type="text" id="dob" name="dob" class="form__input" placeholder="YYYY-MM-DD" data-error="dobError" required>
                    <div id="dobError" class="form__error">Must be 18+ years old, format YYYY-MM-DD.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="nationality">Nationality</label>
                    <input type="text" id="nationality" name="nationality" class="form__input" value="Indian" data-error="nationalityError" required>
                    <div id="nationalityError" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="maritalStatus">Marital Status</label>
                    <select id="maritalStatus" name="maritalStatus" class="form__select" data-error="maritalStatusError">
                        <option value="">Select</option>
                        <option value="Single">Single</option>
                        <option value="Married">Married</option>
                        <option value="Divorced">Divorced</option>
                        <option value="Widowed">Widowed</option>
                    </select>
                    <div id="maritalStatusError" class="form__error">Please select a marital status.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="currentAddress">Current Address</label>
                    <input type="text" id="currentAddress" name="currentAddress" class="form__input" data-error="currentAddressError" required>
                    <div id="currentAddressError" class="form__error">Alphanumeric, commas, and periods only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="permanentAddress">Permanent Address</label>
                    <input type="text" id="permanentAddress" name="permanentAddress" class="form__input" data-error="permanentAddressError" required>
                    <div id="permanentAddressError" class="form__error">Alphanumeric, commas, and periods only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="state">State</label>
                    <select id="state" name="state" class="form__select" data-error="stateError" required>
                        <option value="">Select</option>
                        <option value="Andhra Pradesh">Andhra Pradesh</option>
                        <option value="Karnataka">Karnataka</option>
                        <option value="Tamil Nadu">Tamil Nadu</option>
                        <!-- Add more Indian states as needed -->
                    </select>
                    <div id="stateError" class="form__error">Please select a state.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="city">City</label>
                    <input type="text" id="city" name="city" class="form__input" data-error="cityError" required>
                    <div id="cityError" class="form__error">Alphabets only, no leading/trailing/consecutive spaces.</div>
                </div>
            </div>

            <!-- Page 2: Contact and Identity Details -->
            <div class="form__page" id="page2">
                <div class="form__group">
                    <label class="form__label" for="email">Email Address</label>
                    <input type="email" id="email" name="email" class="form__input" data-error="emailError" required>
                    <div id="emailError" class="form__error">Please enter a valid email address.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="mobile">Mobile Number</label>
                    <input type="tel" id="mobile" name="mobile" class="form__input" data-error="mobileError" required>
                    <div id="mobileError" class="form__error">Exactly 10 digits required.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="altMobile">Alternate Mobile Number</label>
                    <input type="tel" id="altMobile" name="altMobile" class="form__input" data-error="altMobileError">
                    <div id="altMobileError" class="form__error">Exactly 10 digits required.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="aadhaar">Aadhaar Number</label>
                    <input type="text" id="aadhaar" name="aadhaar" class="form__input" data-error="aadhaarError">
                    <div id="aadhaarError" class="form__error">Exactly 12 digits required.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="pan">PAN Number</label>
                    <input type="text" id="pan" name="pan" class="form__input" data-error="panError">
                    <div id="panError" class="form__error">Format: 5 letters + 4 digits + 1 letter.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="zipcode">Zipcode</label>
                    <input type="text" id="zipcode" name="zipcode" class="form__input" data-error="zipcodeError" required>
                    <div id="zipcodeError" class="form__error">Exactly 6 digits required.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="linkedin">LinkedIn Profile (URL)</label>
                    <input type="url" id="linkedin" name="linkedin" class="form__input" data-error="linkedinError" required>
                    <div id="linkedinError" class="form__error">Please enter a valid URL.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="github">GitHub Profile (URL)</label>
                    <input type="url" id="github" name="github" class="form__input" data-error="githubError" required>
                    <div id="githubError" class="form__error">Please enter a valid URL.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="emergencyContact">Emergency Contact Number</label>
                    <input type="tel" id="emergencyContact" name="emergencyContact" class="form__input" data-error="emergencyContactError" required>
                    <div id="emergencyContactError" class="form__error">Exactly 10 digits required.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="portfolio">Portfolio (URL)</label>
                    <input type="url" id="portfolio" name="portfolio" class="form__input" data-error="portfolioError" required>
                    <div id="portfolioError" class="form__error">Please enter a valid URL.</div>
                </div>
            </div>

            <!-- Page 3: Educational Qualifications -->
            <div class="form__page" id="page3">
                <div class="form__group">
                    <label class="form__label" for="qualification">Qualification Level</label>
                    <select id="qualification" name="qualification" class="form__select" data-error="qualificationError" required>
                        <option value="">Select</option>
                        <option value="SSC">SSC</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Graduation">Graduation</option>
                        <option value="Post-Graduation">Post-Graduation</option>
                    </select>
                    <div id="qualificationError" class="form__error">Please select a qualification level.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="institute">Institute/College Name</label>
                    <input type="text" id="institute" name="institute" class="form__input" data-error="instituteError" required>
                    <div id="instituteError" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="board">Board/University</label>
                    <input type="text" id="board" name="board" class="form__input" data-error="boardError" required>
                    <div id="boardError" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="yearPassing">Year of Passing</label>
                    <input type="number" id="yearPassing" name="yearPassing" class="form__input" min="1900" max="2025" data-error="yearPassingError" required>
                    <div id="yearPassingError" class="form__error">Please enter a valid year (1900-2025).</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="percentage">Percentage/CGPA</label>
                    <input type="number" id="percentage" name="percentage" class="form__input" step="0.01" min="0" max="100" data-error="percentageError" required>
                    <div id="percentageError" class="form__error">Enter a value between 0 and 100, up to 2 decimal places.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="branch">Branch of Study</label>
                    <input type="text" id="branch" name="branch" class="form__input" data-error="branchError" required>
                    <div id="branchError" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="technicalSkill1">Technical Skill 1</label>
                    <input type="text" id="technicalSkill1" name="technicalSkill1" class="form__input" data-error="technicalSkill1Error" required>
                    <div id="technicalSkill1Error" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="technicalSkill2">Technical Skill 2</label>
                    <input type="text" id="technicalSkill2" name="technicalSkill2" class="form__input" data-error="technicalSkill2Error" required>
                    <div id="technicalSkill2Error" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="certifications">Certifications</label>
                    <input type="text" id="certifications" name="certifications" class="form__input" data-error="certificationsError">
                    <div id="certificationsError" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="certificateUpload">Upload Certificate (PDF/JPG/PNG, max 2MB)</label>
                    <input type="file" id="certificateUpload" name="certificateUpload" class="form__file" accept=".pdf,.jpg,.png" data-error="certificateUploadError">
                    <div id="certificateUploadError" class="form__error">File must be PDF/JPG/PNG, max 2MB.</div>
                </div>
            </div>

            <!-- Page 4: Professional Experience -->
            <div class="form__page" id="page4">
                <div class="form__group">
                    <label class="form__label">Experience Status</label>
                    <div class="form__radio-group">
                        <label><input type="radio" name="experienceStatus" value="Fresher" onchange="toggleExperienceFields()"> Fresher</label>
                        <label><input type="radio" name="experienceStatus" value="Experienced" onchange="toggleExperienceFields()"> Experienced</label>
                    </div>
                    <div id="experienceStatusError" class="form__error">Please select an experience status.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="companyName">Company Name</label>
                    <input type="text" id="companyName" name="companyName" class="form__input" data-error="companyNameError" disabled>
                    <div id="companyNameError" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="designation">Designation</label>
                    <input type="text" id="designation" name="designation" class="form__input" data-error="designationError" disabled>
                    <div id="designationError" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="yearsExperience">Years of Experience</label>
                    <input type="number" id="yearsExperience" name="yearsExperience" class="form__input" min="0" max="40" data-error="yearsExperienceError" disabled>
                    <div id="yearsExperienceError" class="form__error">Enter a value between 0 and 40.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="workLocation">Work Location</label>
                    <input type="text" id="workLocation" name="workLocation" class="form__input" data-error="workLocationError">
                    <div id="workLocationError" class="form__error">Alphabets only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="lastSalary">Last Salary (CTC, USD)</label>
                    <input type="number" id="lastSalary" name="lastSalary" class="form__input" min="0" data-error="lastSalaryError">
                    <div id="lastSalaryError" class="form__error">Enter a valid number.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="experienceCertificate">Experience Certificate (PDF/JPG, max 2MB)</label>
                    <input type="file" id="experienceCertificate" name="experienceCertificate" class="form__file" accept=".pdf,.jpg" data-error="experienceCertificateError">
                    <div id="experienceCertificateError" class="form__error">File must be PDF/JPG, max 2MB.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="prevCompany1">Previous Company 1</label>
                    <input type="text" id="prevCompany1" name="prevCompany1" class="form__input" data-error="prevCompany1Error" required>
                    <div id="prevCompany1Error" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="prevDesignation1">Previous Designation 1</label>
                    <input type="text" id="prevDesignation1" name="prevDesignation1" class="form__input" data-error="prevDesignation1Error" required>
                    <div id="prevDesignation1Error" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="prevStart1">Previous Start Date 1 (YYYY-MM)</label>
                    <input type="text" id="prevStart1" name="prevStart1" class="form__input" placeholder="YYYY-MM" data-error="prevStart1Error" required>
                    <div id="prevStart1Error" class="form__error">Format: YYYY-MM.</div>
                </div>
            </div>

            <!-- Page 5: Additional Details and Uploads -->
            <div class="form__page" id="page5">
                <div class="form__group">
                    <label class="form__label" for="prevEnd1">Previous End Date 1 (YYYY-MM)</label>
                    <input type="text" id="prevEnd1" name="prevEnd1" class="form__input" placeholder="YYYY-MM" data-error="prevEnd1Error" required>
                    <div id="prevEnd1Error" class="form__error">Format: YYYY-MM.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="jobRole">Job Role Applied For</label>
                    <select id="jobRole" name="jobRole" class="form__select" data-error="jobRoleError" required>
                        <option value="">Select</option>
                        <option value="Software Engineer">Software Engineer</option>
                        <option value="Data Analyst">Data Analyst</option>
                        <option value="DevOps Engineer">DevOps Engineer</option>
                    </select>
                    <div id="jobRoleError" class="form__error">Please select a job role.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="preferredLocation">Preferred Location</label>
                    <input type="text" id="preferredLocation" name="preferredLocation" class="form__input" data-error="preferredLocationError">
                    <div id="preferredLocationError" class="form__error">Alphabets only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="expectedSalary">Expected Salary (USD)</label>
                    <input type="number" id="expectedSalary" name="expectedSalary" class="form__input" min="0" data-error="expectedSalaryError">
                    <div id="expectedSalaryError" class="form__error">Enter a valid number.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="noticePeriod">Notice Period</label>
                    <select id="noticePeriod" name="noticePeriod" class="form__select" data-error="noticePeriodError" required>
                        <option value="">Select</option>
                        <option value="Immediate">Immediate</option>
                        <option value="15 Days">15 Days</option>
                        <option value="30 Days">30 Days</option>
                        <option value="60 Days">60 Days</option>
                    </select>
                    <div id="noticePeriodError" class="form__error">Please select a notice period.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="keySkills">Key Skills (Comma-separated)</label>
                    <input type="text" id="keySkills" name="keySkills" class="form__input" data-error="keySkillsError" required>
                    <div id="keySkillsError" class="form__error">Comma-separated, no leading/trailing spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="referenceName">Reference Name</label>
                    <input type="text" id="referenceName" name="referenceName" class="form__input" data-error="referenceNameError">
                    <div id="referenceNameError" class="form__error">Alphabets and spaces only, no leading/trailing/consecutive spaces.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="referenceEmail">Reference Email</label>
                    <input type="email" id="referenceEmail" name="referenceEmail" class="form__input" data-error="referenceEmailError">
                    <div id="referenceEmailError" class="form__error">Please enter a valid email address.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="resume">Resume/CV (PDF/DOC, max 5MB)</label>
                    <input type="file" id="resume" name="resume" class="form__file" accept=".pdf,.doc" data-error="resumeError" required>
                    <div id="resumeError" class="form__error">File must be PDF/DOC, max 5MB.</div>
                </div>
                <div class="form__group">
                    <label class="form__label" for="terms">Agree to Terms</label>
                    <label class="form__checkbox-label">
                        <input type="checkbox" id="terms" name="terms" data-error="termsError" required>
                        I agree to the terms and conditions
                    </label>
                    <div id="termsError" class="form__error">You must agree to the terms.</div>
                </div>
            </div>

            <div class="form__navigation">
                <button type="button" class="form__button form__button--secondary" id="prevBtn" onclick="changePage(-1)" disabled>Previous</button>
                <button type="button" class="form__button" id="nextBtn" onclick="changePage(1)">Next</button>
                <button type="button" class="form__button" id="submitBtn" onclick="showConfirmationModal()" style="display: none;">Submit Application ðŸŽ‰</button>
            </div>
        </form>
    </div>

    <div id="confirmationModal" class="modal">
        <div class="modal__content">
            <h2 class="modal__title">Confirm Submission ðŸ“¬</h2>
            <p>Are you sure you want to submit your application?</p>
            <button class="modal__button modal__button--confirm" onclick="submitForm()">Confirm</button>
            <button class="modal__button modal__button--cancel" onclick="closeModal()">Cancel</button>
        </div>
    </div>

    <script>
        let currentPage = 1;
        const totalPages = 5;
        const currentYear = new Date().getFullYear();

        const inputs = document.querySelectorAll('.form__input, .form__textarea, .form__select, .form__file, #terms');
        inputs.forEach(input => {
            input.addEventListener('input', () => validateInput(input));
            if (input.type === 'file') {
                input.addEventListener('change', () => validateInput(input));
            }
        });

        function validateInput(input) {
            const errorElement = document.getElementById(input.dataset.error);
            const value = input.value;

            if (['fullName', 'parentName', 'nationality', 'institute', 'board', 'city', 'branch', 'technicalSkill1', 'technicalSkill2', 'companyName', 'designation', 'prevCompany1', 'prevDesignation1', 'referenceName'].includes(input.id)) {
                const regex = /^[A-Za-z\s]*$/;
                if (!value || !regex.test(value) || value.trim() !== value || /\s{2,}/.test(value)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (['currentAddress', 'permanentAddress'].includes(input.id)) {
                const regex = /^[A-Za-z0-9,. ]*$/;
                if (!value || !regex.test(value) || value.trim() !== value || /\s{2,}/.test(value)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (['email', 'referenceEmail'].includes(input.id)) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (value && !emailRegex.test(value)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (['mobile', 'altMobile', 'emergencyContact'].includes(input.id)) {
                const regex = /^\d{10}$/;
                if (value && !regex.test(value)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (input.id === 'aadhaar') {
                const regex = /^\d{12}$/;
                if (value && !regex.test(value)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (input.id === 'pan') {
                const regex = /^[A-Z]{5}\d{4}[A-Z]$/;
                if (value && !regex.test(value)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (input.id === 'zipcode') {
                const regex = /^\d{6}$/;
                if (!value || !regex.test(value)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (['linkedin', 'github', 'portfolio'].includes(input.id)) {
                try {
                    if (!value) {
                        errorElement.classList.add('form__error--visible');
                        return false;
                    }
                    new URL(value);
                    errorElement.classList.remove('form__error--visible');
                } catch {
                    errorElement.classList.add('form__error--visible');
                    return false;
                }
            }

            if (input.id === 'dob') {
                const regex = /^\d{4}-\d{2}-\d{2}$/;
                if (!value || !regex.test(value)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                }
                const dob = new Date(value);
                const age = currentYear - dob.getFullYear();
                if (isNaN(dob.getTime()) || age < 18) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                }
                errorElement.classList.remove('form__error--visible');
            }

            if (input.id === 'yearPassing') {
                if (!value || isNaN(value) || value < 1900 || value > currentYear) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (input.id === 'percentage') {
                if (!value || isNaN(value) || value < 0 || value > 100) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (input.id === 'keySkills') {
                if (!value || value.trim() !== value || /\s{2,}/.test(value)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (input.tagName === 'SELECT' && input.id !== 'maritalStatus') {
                if (!value) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (input.type === 'file') {
                const file = input.files[0];
                if (file) {
                    const maxSize = input.id === 'resume' ? 5 * 1024 * 1024 : input.id === 'photo' ? 500 * 1024 : 2 * 1024 * 1024;
                    const allowedTypes = input.accept.split(',').map(type => type.trim());
                    const fileType = file.type.toLowerCase();
                    if (file.size > maxSize || !allowedTypes.includes(`.${fileType.split('/')[1]}`)) {
                        errorElement.classList.add('form__error--visible');
                        return false;
                    } else {
                        errorElement.classList.remove('form__error--visible');
                    }
                } else if (input.required) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (input.id === 'terms' && !input.checked) {
                errorElement.classList.add('form__error--visible');
                return false;
            } else if (input.id === 'terms') {
                errorElement.classList.remove('form__error--visible');
            }

            if (input.id === 'yearsExperience') {
                if (value && (isNaN(value) || value < 0 || value > 40)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            if (['prevStart1', 'prevEnd1'].includes(input.id)) {
                const regex = /^\d{4}-\d{2}$/;
                if (!value || !regex.test(value)) {
                    errorElement.classList.add('form__error--visible');
                    return false;
                } else {
                    errorElement.classList.remove('form__error--visible');
                }
            }

            return true;
        }

        function toggleExperienceFields() {
            const experienceStatus = document.querySelector('input[name="experienceStatus"]:checked')?.value;
            const fields = ['companyName', 'designation', 'yearsExperience'];
            fields.forEach(id => {
                const input = document.getElementById(id);
                input.disabled = experienceStatus !== 'Experienced';
                input.required = experienceStatus === 'Experienced';
            });
        }

        function validatePage(pageNumber) {
            const page = document.getElementById(`page${pageNumber}`);
            const pageInputs = page.querySelectorAll('.form__input, .form__textarea, .form__select, .form__file, #terms');
            let isValid = true;

            pageInputs.forEach(input => {
                if (!validateInput(input)) {
                    isValid = false;
                }
            });

            if (pageNumber === 4) {
                const experienceStatus = document.querySelector('input[name="experienceStatus"]:checked')?.value;
                if (!experienceStatus) {
                    document.getElementById('experienceStatusError').classList.add('form__error--visible');
                    isValid = false;
                } else {
                    document.getElementById('experienceStatusError').classList.remove('form__error--visible');
                }
            }

            return isValid;
        }

        function changePage(direction) {
            if (direction === 1 && !validatePage(currentPage)) {
                alert('Please fix all errors on this page.');
                return;
            }

            currentPage += direction;
            if (currentPage < 1) currentPage = 1;
            if (currentPage > totalPages) currentPage = totalPages;

            document.querySelectorAll('.form__page').forEach(page => {
                page.classList.remove('form__page--active');
            });
            document.getElementById(`page${currentPage}`).classList.add('form__page--active');
            document.getElementById('prevBtn').disabled = currentPage === 1;
            document.getElementById('nextBtn').style.display = currentPage === totalPages ? 'none' : 'block';
            document.getElementById('submitBtn').style.display = currentPage === totalPages ? 'block' : 'none';
        }

        function showConfirmationModal() {
            if (!validatePage(currentPage)) {
                alert('Please fix all errors before submitting.');
                return;
            }

            document.getElementById('confirmationModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('confirmationModal').style.display = 'none';
        }

        async function submitForm() {
            if (!validatePage(currentPage)) {
                alert('Please fix all errors before submitting.');
                return;
            }

            const form = document.getElementById('jobApplicationForm');
            const formData = new FormData(form);

            try {
                const response = await fetch('http://localhost:5000/api/submit', {
                    method: 'POST',
                    body: formData,
                });

                const result = await response.json();
                if (response.ok) {
                    closeModal();
                    alert('Application submitted successfully! ðŸŽ‰');
                    form.reset();
                    changePage(-totalPages + 1);
                } else {
                    alert(`Error: ${result.error}`);
                }
            } catch (error) {
                alert('Error submitting application. Please try again.');
            }
        }
    </script>
</body>
</html>